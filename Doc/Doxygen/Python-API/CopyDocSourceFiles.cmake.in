FILE(REMOVE_RECURSE "@PROC_DOC_FILE_SOURCE_DIR@")
FILE(COPY "@DOC_FILE_SOURCE_DIR@" DESTINATION "@CMAKE_CURRENT_BINARY_DIR@"
  PATTERN *~ EXCLUDE PATTERN *.doc.py EXCLUDE PATTERN *.txt EXCLUDE)

FILE(GLOB_RECURSE API_DOC_FILES RELATIVE "@DOC_FILE_SOURCE_DIR@" "@DOC_FILE_SOURCE_DIR@/*.doc.py")

FOREACH(API_DOC_FILE ${API_DOC_FILES})
  GET_FILENAME_COMPONENT(API_DOC_FILE_DIR "${API_DOC_FILE}" DIRECTORY)
  FILE(READ "@DOC_FILE_SOURCE_DIR@/${API_DOC_FILE}" API_DOC_FILE_CONT)
  FILE(APPEND "@PROC_DOC_FILE_SOURCE_DIR@/${API_DOC_FILE_DIR}/__init__.py" "\n${API_DOC_FILE_CONT}")
ENDFOREACH(API_DOC_FILE)
